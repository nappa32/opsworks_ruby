
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Attributes &#8212; opsworks_ruby 1.8.0 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.8.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Recipes" href="recipes.html" />
    <link rel="prev" title="Requirements" href="requirements.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="recipes.html" title="Recipes"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="requirements.html" title="Requirements"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">opsworks_ruby 1.8.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="attributes">
<span id="id1"></span><h1>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline">¶</a></h1>
<div class="line-block">
<div class="line">Attributes format follows the guidelines of old Chef 11.x based
OpsWorks stack.</div>
<div class="line">So all of them, need to be placed under
<code class="docutils literal"><span class="pre">node['deploy'][&lt;application_shortname&gt;]</span></code>.</div>
<div class="line">Attributes (and whole logic of this cookbook) are divided to six
sections.</div>
<div class="line">Following convention is used:
<code class="docutils literal"><span class="pre">app</span> <span class="pre">==</span> <span class="pre">node['deploy'][&lt;application_shortname&gt;]</span></code></div>
<div class="line">so for example <code class="docutils literal"><span class="pre">app['framework']['adapter']</span></code> actually means</div>
<div class="line"><code class="docutils literal"><span class="pre">node['deploy'][&lt;application_shortname&gt;]['framework']['adapter']</span></code>.</div>
</div>
<div class="section" id="stack-attributes">
<h2>Stack attributes<a class="headerlink" href="#stack-attributes" title="Permalink to this headline">¶</a></h2>
<p>These attributes are used on Stack/Layer level globally to configure
the opsworks_ruby cookbook itself. They should’nt be used under
<code class="docutils literal"><span class="pre">node['deploy'][&lt;application_shortname&gt;]</span></code> (notice lack of the <code class="docutils literal"><span class="pre">app[]</span></code>
convention).</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">node['applications']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li>An array of application shortnames which should be deployed to given layer.
If set, only applications witch <code class="docutils literal"><span class="pre">deploy</span></code> flag set (on OpsWorks side) included
in this list will be deployed. If not set, all <code class="docutils literal"><span class="pre">deploy</span></code> application will be
supported. This parameter mostly matters during the setup phase, since all
application in given stack are deployed to the given layer. Using this paramter
you can narrow the list to application which you actually intend to use.
<strong>Important</strong> thing is, that when you try to do a manual deploy from OpsWorks
of an application, not included in this list - it will be skipped, as this list
takes precedence over anything else.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">node['ruby-ng']['ruby_version']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Type:</strong> string</li>
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">2.4</span></code></li>
<li>Sets the Ruby version used through the system. See <a class="reference external" href="https://supermarket.chef.io/cookbooks/ruby-ng">ruby-ng cookbook documentation</a>
for more details</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="cross-application-attributes">
<h2>Cross-application attributes<a class="headerlink" href="#cross-application-attributes" title="Permalink to this headline">¶</a></h2>
<p>These attributes can only be set at the server level; they cannot vary from
application to application.</p>
<div class="section" id="webserver">
<h3>webserver<a class="headerlink" href="#webserver" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">node['defaults']['webserver']['remove_default_sites']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Type:</strong> array</li>
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">%w[default</span> <span class="pre">default.conf</span> <span class="pre">000-default</span> <span class="pre">000-default.conf</span> <span class="pre">default-ssl</span> <span class="pre">default-ssl.conf]</span></code></li>
<li><strong>Note</strong>: Only applies to Apache2 webserver</li>
<li>A list of “default site” filenames that should be removed (if they exist) from
<code class="docutils literal"><span class="pre">/etc/{httpd,apache2}/sites-enabled</span></code> in order to disable any “default site”
provided by the OS-provided Apache2 package. Set this to <code class="docutils literal"><span class="pre">nil</span></code> or an empty
array (<code class="docutils literal"><span class="pre">[]</span></code>) if you want the default site to be enabled.</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="application-attributes">
<h2>Application attributes<a class="headerlink" href="#application-attributes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="global">
<h3>global<a class="headerlink" href="#global" title="Permalink to this headline">¶</a></h3>
<p>Global parameters apply to the whole application, and can be used by any section
(framework, appserver etc.).</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['global']['environment']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Type:</strong> string</li>
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">production</span></code></li>
<li>Sets the “deploy environment” for all the app-related (for example <code class="docutils literal"><span class="pre">RAILS_ENV</span></code>
in Rails) actions in the project (server, worker, etc.)</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['global']['deploy_dir']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Type:</strong> string</li>
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">/srv/www/app_name</span></code></li>
<li>Determines where the application will be deployed.</li>
<li>Note that if you override this setting, you’ll typically want to include the short_name
in the setting. In other words, this setting doesn’t override the <code class="docutils literal"><span class="pre">/srv/www</span></code> base
directory defafult; it overrides the application-specific <code class="docutils literal"><span class="pre">/srv/www/app_name</span></code> default.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['global']['symlinks']</span></code><ul>
<li><strong>Type:</strong> key-value</li>
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">{</span> <span class="pre">&quot;system&quot;:</span> <span class="pre">&quot;public/system&quot;,</span> <span class="pre">&quot;assets&quot;:</span> <span class="pre">&quot;public/assets&quot;,</span> <span class="pre">&quot;cache&quot;:</span> <span class="pre">&quot;tmp/cache&quot;,</span> <span class="pre">&quot;pids&quot;:</span> <span class="pre">&quot;tmp/pids&quot;,</span> <span class="pre">&quot;log&quot;:</span> <span class="pre">&quot;log&quot;</span> <span class="pre">}</span></code></li>
<li><strong>Important Notice:</strong> Any values for this parameter will be <em>merged</em> to the defaults</li>
<li>List of symlinks created to the <code class="docutils literal"><span class="pre">shared</span></code> directory. The format is <code class="docutils literal"><span class="pre">{&quot;shared_path&quot;:</span> <span class="pre">&quot;release_path&quot;}</span></code>.
For example <code class="docutils literal"><span class="pre">{&quot;system&quot;,</span> <span class="pre">&quot;public/system&quot;}</span></code> means: Link <code class="docutils literal"><span class="pre">/src/www/app_name/current/public/system</span></code> to
<code class="docutils literal"><span class="pre">/src/www/app_name/shared/system</span></code>.</li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">app['global']['create_dirs_before_symlink']</span></code><ul>
<li><strong>Type:</strong> array</li>
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">[&quot;tmp&quot;,</span> <span class="pre">&quot;public&quot;,</span> <span class="pre">&quot;config&quot;,</span> <span class="pre">&quot;../../shared/cache&quot;,</span> <span class="pre">&quot;../../shared/assets&quot;]</span></code></li>
<li><strong>Important Notice:</strong> Any values for this parameter will be <em>appended</em> to the defaults</li>
<li>List of directories to be created before symlinking. Paths are relative to <code class="docutils literal"><span class="pre">release_path</span></code>.
For example <code class="docutils literal"><span class="pre">tmp</span></code> becomes <code class="docutils literal"><span class="pre">/srv/www/app_name/current/tmp</span></code>.</li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">app['global']['purge_before_symlink']</span></code><ul>
<li><strong>Type:</strong> array</li>
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">[&quot;log&quot;,</span> <span class="pre">&quot;tmp/cache&quot;,</span> <span class="pre">&quot;tmp/pids&quot;,</span> <span class="pre">&quot;public/system&quot;,</span> <span class="pre">&quot;public/assets&quot;]</span></code></li>
<li><strong>Important Notice:</strong> Any values for this parameter will be <em>appended</em> to the defaults</li>
<li>List of directories to be wiped out before symlinking. Paths are relative to <code class="docutils literal"><span class="pre">release_path</span></code>.
For example <code class="docutils literal"><span class="pre">tmp</span></code> becomes <code class="docutils literal"><span class="pre">/srv/www/app_name/current/tmp</span></code>.</li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">app['global']['rollback_on_error']</span></code><ul>
<li><strong>Type:</strong> boolean</li>
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">true</span></code></li>
<li>When set to true, any failed deploy will be removed from <code class="docutils literal"><span class="pre">releases</span></code> directory.</li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">app['global']['logrotate_rotate']</span></code><ul>
<li><strong>Type:</strong> integer</li>
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">30</span></code></li>
<li><strong>Important Notice:</strong> The parameter is in days</li>
<li>How many days of logfiles are kept.</li>
<li>See Logrotate Attributes for more information on logrotate attribute precedence.</li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">app['global']['logrotate_frequency']</span></code><ul>
<li><strong>Type:</strong> string</li>
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">daily</span></code></li>
<li><strong>Supported values:</strong> <code class="docutils literal"><span class="pre">daily</span></code>, <code class="docutils literal"><span class="pre">weekly</span></code>, <code class="docutils literal"><span class="pre">monthly</span></code>, <code class="docutils literal"><span class="pre">size</span> <span class="pre">X</span></code></li>
<li>How often logrotate runs for the given log(s), either time-based or
when the log(s) reach a certain size.</li>
<li>See Logrotate Attributes for more information on logrotate attribute precedence.</li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">app['global']['logrotate_options']</span></code><ul>
<li><strong>Type:</strong> Array</li>
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">%w[missingok</span> <span class="pre">compress</span> <span class="pre">delaycompress</span> <span class="pre">notifempty</span> <span class="pre">copytruncate</span> <span class="pre">sharedscripts]</span></code></li>
<li>All of the unqualified options (i.e., without arguments) that should be enabled
for the specified logrotate configuration.</li>
<li>See Logrotate Attributes for more information on logrotate attribute precedence.</li>
</ul>
</li>
<li><code class="docutils literal"><span class="pre">app['global']['logrotate_X']</span></code><ul>
<li><strong>Type:</strong> Varies</li>
<li>Any attribute value Y for <code class="docutils literal"><span class="pre">logrotate_X</span></code> will cause the [logrotate_app](<a class="reference external" href="https://github.com/stevendanna/logrotate/blob/master/resources/app.rb">https://github.com/stevendanna/logrotate/blob/master/resources/app.rb</a>)
resource _X_ to be called with argument Y. For example setting <code class="docutils literal"><span class="pre">logrotate_cookbook</span></code> to <code class="docutils literal"><span class="pre">'my_cookbook'</span></code>
will result in the <code class="docutils literal"><span class="pre">logrotate_app</span></code> resource being invoked with the resource value <code class="docutils literal"><span class="pre">cookbook</span> <span class="pre">'my_cookbook'</span></code>.</li>
<li>See Logrotate Attributes for more information on logrotate attribute precedence.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="database">
<h3>database<a class="headerlink" href="#database" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">Those parameters will be passed without any alteration to the
<code class="docutils literal"><span class="pre">database.yml</span></code></div>
<div class="line">file. Keep in mind, that if you have RDS connected to your OpsWorks
application,</div>
<div class="line">you don’t need to use them. The chef will do all the job, and
determine them</div>
<div class="line">for you.</div>
</div>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['database']['adapter']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Supported values:</strong> <code class="docutils literal"><span class="pre">mariadb</span></code>, <code class="docutils literal"><span class="pre">mysql</span></code>, <code class="docutils literal"><span class="pre">postgresql</span></code>, <code class="docutils literal"><span class="pre">sqlite3</span></code>, <code class="docutils literal"><span class="pre">null</span></code></li>
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">sqlite3</span></code></li>
<li>ActiveRecord adapter which will be used for database connection. <code class="docutils literal"><span class="pre">null</span></code> means
that no database will be configured, and is currently only tested with the <code class="docutils literal"><span class="pre">rails</span></code>
framework.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['database']['username']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Username used to authenticate to the DB</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['database']['password']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Password used to authenticate to the DB</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['database']['host']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Database host</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['database']['database']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Database name</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['database'][&lt;any</span> <span class="pre">other&gt;]</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Any other key-value pair provided here, will be passed directly to
the <code class="docutils literal"><span class="pre">database.yml</span></code></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="scm">
<h3>scm<a class="headerlink" href="#scm" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">Those parameters can also be determined from OpsWorks application, and
usually</div>
<div class="line">you don’t need to provide them here. Currently only <code class="docutils literal"><span class="pre">git</span></code> is
supported.</div>
</div>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['scm']['scm_provider']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Supported values:</strong> <code class="docutils literal"><span class="pre">git</span></code></li>
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">git</span></code></li>
<li>SCM used by the cookbook to clone the repo.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['scm']['remove_scm_files']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Supported values:</strong> <code class="docutils literal"><span class="pre">true</span></code>, <code class="docutils literal"><span class="pre">false</span></code></li>
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">true</span></code></li>
<li>If set to true, all SCM leftovers (like <code class="docutils literal"><span class="pre">.git</span></code>) will be removed.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['scm']['repository']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Repository URL</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['scm']['revision']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Branch name/SHA1 of commit which should be use as a base of the
deployment.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['scm']['ssh_key']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li>A private SSH deploy key (the key itself, not the file name), used
when fetching repositories via SSH.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['scm']['ssh_wrapper']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li>A wrapper script, which will be used by git when fetching repository
via SSH. Essentially, a value of <code class="docutils literal"><span class="pre">GIT_SSH</span></code> environment variable.
This cookbook provides one of those scripts for you, so you shouldn’t
alter this variable unless you know what you’re doing.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['scm']['generated_ssh_wrapper']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">/tmp/ssh-git-wrapper.sh</span></code></li>
<li>If the cookbook generates an SSH wrapper for you, this is where it
will generate it. For users whose /tmp partitions are mounted <code class="docutils literal"><span class="pre">noexec</span></code>
(a good security practice to prevent code injection exploits), this
attribute allows you to override that location to a partition where
execution of the generated shell script is allowed.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['scm']['enabled_submodules']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li>If set to <code class="docutils literal"><span class="pre">true</span></code>, any submodules included in the repository, will
also be fetched.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="framework">
<h3>framework<a class="headerlink" href="#framework" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">Pre-optimalization for specific frameworks (like migrations, cache etc.).</div>
<div class="line">Currently <code class="docutils literal"><span class="pre">hanami.rb</span></code> and <code class="docutils literal"><span class="pre">Rails</span></code> are supported.</div>
</div>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['framework']['adapter']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Supported values:</strong> <code class="docutils literal"><span class="pre">null</span></code>, <code class="docutils literal"><span class="pre">hanami</span></code>, <code class="docutils literal"><span class="pre">padrino</span></code>, <code class="docutils literal"><span class="pre">rails</span></code></li>
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">rails</span></code></li>
<li>Ruby framework used in project.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['framework']['migrate']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Supported values:</strong> <code class="docutils literal"><span class="pre">true</span></code>, <code class="docutils literal"><span class="pre">false</span></code></li>
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">true</span></code></li>
<li>If set to <code class="docutils literal"><span class="pre">true</span></code>, migrations will be launch during deployment.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['framework']['migration_command']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li>A command which will be invoked to perform migration. This cookbook
comes with predefined migration commands, well suited for the task, and
usually you don’t have to change this parameter.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['framework']['assets_precompile']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Supported values:</strong> <code class="docutils literal"><span class="pre">true</span></code>, <code class="docutils literal"><span class="pre">false</span></code></li>
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">true</span></code></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['framework']['assets_precompilation_command']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li>A command which will be invoked to precompile assets.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['framework']['logrotate_name']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Type:</strong> string</li>
<li><strong>Default:</strong> Depends on adapter-specific behaviors</li>
<li>The name of the logrotate_app resource, and generated configuration file,
for the specified app framework logrotate configuration.</li>
<li>Unlike other logrotate attributes, this attribute can only be set or overridden
at a the app framework level; there are no app-wide or global settings beyond
those provided by the framework library</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['framework']['logrotate_log_paths']</span></code><ul>
<li><strong>Type:</strong> Array</li>
<li><strong>Default:</strong> Depends on adapter-specific behaviors</li>
<li>Which log file(s) should be backed up via logrotate. If this parameter evaluates
to an empty array, no logs will be backed up for the specified app framework.</li>
<li>Unlike other logrotate attributes, this attribute can only be set or overridden
at a the app framework level; there are no app-wide or global settings beyond
those provided by the framework library.</li>
</ul>
</li>
</ul>
<div class="section" id="padrino">
<h4>padrino<a class="headerlink" href="#padrino" title="Permalink to this headline">¶</a></h4>
<div class="line-block">
<div class="line">For Padrino, slight adjustments needs to be made. Since there are many database</div>
<div class="line">adapters supported, instead of creating configuration for each one, the</div>
<div class="line"><code class="docutils literal"><span class="pre">DATABASE_URL</span></code> environmental variable is provided. You need to parse it in your</div>
<div class="line"><code class="docutils literal"><span class="pre">config/database.rb</span></code> file and properly pass to the configuration options.</div>
<div class="line">For example, for ActiveRecord:</div>
</div>
<div class="code ruby highlight-default"><div class="highlight"><pre><span></span><span class="n">database_url</span> <span class="o">=</span> <span class="n">ENV</span><span class="p">[</span><span class="s1">&#39;DATABASE_URL&#39;</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">ActiveRecord</span><span class="p">::</span><span class="n">ConnectionAdapters</span><span class="p">::</span><span class="n">ConnectionSpecification</span><span class="p">::</span><span class="n">ConnectionUrlResolver</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">ENV</span><span class="p">[</span><span class="s1">&#39;DATABASE_URL&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">to_hash</span>
<span class="n">ActiveRecord</span><span class="p">::</span><span class="n">Base</span><span class="o">.</span><span class="n">configurations</span><span class="p">[:</span><span class="n">production</span><span class="p">]</span> <span class="o">=</span> <span class="n">database_url</span> <span class="o">||</span> <span class="p">{</span>
  <span class="p">:</span><span class="n">adapter</span> <span class="o">=&gt;</span> <span class="s1">&#39;sqlite3&#39;</span><span class="p">,</span>
  <span class="p">:</span><span class="n">database</span> <span class="o">=&gt;</span> <span class="n">Padrino</span><span class="o">.</span><span class="n">root</span><span class="p">(</span><span class="s1">&#39;db&#39;</span><span class="p">,</span> <span class="s1">&#39;dummy_app_production.db&#39;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="rails">
<h4>rails<a class="headerlink" href="#rails" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['framework']['envs_in_console']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Supported values:</strong> <code class="docutils literal"><span class="pre">true</span></code>, <code class="docutils literal"><span class="pre">false</span></code></li>
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">false</span></code></li>
<li>If set to true, <code class="docutils literal"><span class="pre">rails</span> <span class="pre">console</span></code> will be invoked with all
application-level environment variables set.</li>
<li><strong>WARNING!</strong> This is highly unstable feature. If you experience any
troubles with deployments, and have this feature enabled, consider disabling
it as a first step in your debugging process.</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="appserver">
<h3>appserver<a class="headerlink" href="#appserver" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">Configuration parameters for the ruby application server. Currently <code class="docutils literal"><span class="pre">Puma</span></code>,</div>
<div class="line"><code class="docutils literal"><span class="pre">Thin</span></code>, <code class="docutils literal"><span class="pre">Unicorn</span></code>, and <code class="docutils literal"><span class="pre">Passenger</span></code>  are supported.</div>
</div>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['appserver']['adapter']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">puma</span></code></li>
<li><strong>Supported values:</strong> <code class="docutils literal"><span class="pre">puma</span></code>, <code class="docutils literal"><span class="pre">thin</span></code>, <code class="docutils literal"><span class="pre">unicorn</span></code>, <code class="docutils literal"><span class="pre">passenger</span></code>, <code class="docutils literal"><span class="pre">null</span></code></li>
<li>Server on the application side, which will receive requests from
webserver in front. <code class="docutils literal"><span class="pre">null</span></code> means no appserver enabled.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['appserver']['application_yml']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Supported values:</strong> <code class="docutils literal"><span class="pre">true</span></code>, <code class="docutils literal"><span class="pre">false</span></code></li>
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">false</span></code></li>
<li>Creates a <code class="docutils literal"><span class="pre">config/application.yml</span></code> file with all pre-configured
environment variables. Useful for gems like <a class="reference external" href="https://github.com/laserlemon/figaro">figaro</a></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['appserver']['dot_env']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Supported values:</strong> <code class="docutils literal"><span class="pre">true</span></code>, <code class="docutils literal"><span class="pre">false</span></code></li>
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">false</span></code></li>
<li>Creates a <code class="docutils literal"><span class="pre">.env</span></code> file with all pre-configured environment
variables. Useful for gems like <a class="reference external" href="https://github.com/bkeepers/dotenv">dotenv</a></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['appserver']['preload_app']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Supported values:</strong> <code class="docutils literal"><span class="pre">true</span></code>, <code class="docutils literal"><span class="pre">false</span></code></li>
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">true</span></code></li>
<li>Enabling this preloads an application before forking worker processes.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['appserver']['timeout']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">50</span></code></li>
<li>Sets the timeout of worker processes to seconds.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['appserver']['worker_processes']|</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">4</span></code></li>
<li>Sets the current number of worker processes. Each worker process will
serve exactly one client at a time.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['appserver']['passenger_version']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default:</strong> None</li>
<li>Which Debian APT package version should be installed from the PPA
repo provided by Passenger. Currently this defaults to the latest
version provided by the Passenger APT PPA. Set this to a non-nil
value to lock your Passenger installation at a specific version.</li>
</ul>
</div></blockquote>
<div class="section" id="unicorn">
<h4>unicorn<a class="headerlink" href="#unicorn" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference external" href="https://unicorn.bogomips.org/Unicorn/Configurator.html#method-i-listen"><code class="docutils literal"><span class="pre">app['appserver']['backlog']</span></code></a></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">1024</span></code></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><a class="reference external" href="https://unicorn.bogomips.org/Unicorn/Configurator.html#method-i-listen"><code class="docutils literal"><span class="pre">app['appserver']['delay']</span></code></a></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">0.5</span></code></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><a class="reference external" href="https://unicorn.bogomips.org/Unicorn/Configurator.html#method-i-listen"><code class="docutils literal"><span class="pre">app['appserver']['tcp_nodelay']</span></code></a></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Supported values:</strong> <code class="docutils literal"><span class="pre">true</span></code>, <code class="docutils literal"><span class="pre">false</span></code></li>
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">true</span></code></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><a class="reference external" href="https://unicorn.bogomips.org/Unicorn/Configurator.html#method-i-listen"><code class="docutils literal"><span class="pre">app['appserver']['tcp_nopush']</span></code></a></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Supported values:</strong> <code class="docutils literal"><span class="pre">true</span></code>, <code class="docutils literal"><span class="pre">false</span></code></li>
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">false</span></code></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><a class="reference external" href="https://unicorn.bogomips.org/Unicorn/Configurator.html#method-i-listen"><code class="docutils literal"><span class="pre">app['appserver']['tries']</span></code></a></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">5</span></code></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="puma">
<h4>puma<a class="headerlink" href="#puma" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference external" href="https://github.com/puma/puma/blob/c169853ff233dd3b5c4e8ed17e84e1a6d8cb565c/examples/config.rb#L56"><code class="docutils literal"><span class="pre">app['appserver']['log_requests']</span></code></a></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Supported values:</strong> <code class="docutils literal"><span class="pre">true</span></code>, <code class="docutils literal"><span class="pre">false</span></code></li>
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">false</span></code></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><a class="reference external" href="https://github.com/puma/puma/blob/c169853ff233dd3b5c4e8ed17e84e1a6d8cb565c/examples/config.rb#L62"><code class="docutils literal"><span class="pre">app['appserver']['thread_max']</span></code></a></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">16</span></code></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><a class="reference external" href="https://github.com/puma/puma/blob/c169853ff233dd3b5c4e8ed17e84e1a6d8cb565c/examples/config.rb#L62"><code class="docutils literal"><span class="pre">app['appserver']['thread_min']</span></code></a></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">0</span></code></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="thin">
<h4>thin<a class="headerlink" href="#thin" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['appserver']['max_connections']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">1024</span></code></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['appserver']['max_persistent_connections']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">512</span></code></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['appserver']['timeout']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">60</span></code></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['appserver']['worker_processes']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">4</span></code></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="passenger">
<h4>passenger<a class="headerlink" href="#passenger" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['appserver']['max_pool_size']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Type:</strong> Integer</li>
<li><strong>Default:</strong> Passenger-provided default (based on server capacity)</li>
<li>Sets the <code class="docutils literal"><span class="pre">PassengerMaxPoolSize</span></code> parameter</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['appserver']['min_instances']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Type:</strong> Integer</li>
<li><strong>Default:</strong> Passenger-provided default (based on server capacity)</li>
<li>Sets the <code class="docutils literal"><span class="pre">PassengerMinInstances</span></code> parameter</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['appserver']['mount_point']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">/</span></code></li>
<li>Which URL path should be handled by Passenger. This option allows
you to configure your application to handle only a subset of requests
made to your web server. Useful for certain hybrid static/dynamic
web sites.</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="id2">
<h3>webserver<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">Webserver configuration. Proxy passing to application is handled out-of-the-box.</div>
<div class="line">Currently Apache2 and nginx is supported.</div>
</div>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['webserver']['adapter']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">nginx</span></code></li>
<li><strong>Supported values:</strong> <code class="docutils literal"><span class="pre">apache2</span></code>, <code class="docutils literal"><span class="pre">nginx</span></code>, <code class="docutils literal"><span class="pre">null</span></code></li>
<li>Webserver in front of the instance. It runs on port 80 by default
(see <code class="docutils literal"><span class="pre">app['webserver']['port']</span></code>), and receives all requests from the
Load Balancer/Internet. <code class="docutils literal"><span class="pre">null</span></code> means no webserver enabled.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['webserver']['dhparams']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li>If you wish to use custom generated DH primes, instead of common ones
(which is a very good practice), put the contents (not file name) of
the <code class="docutils literal"><span class="pre">dhparams.pem</span></code> file into this attribute. <a class="reference external" href="https://weakdh.org/sysadmin.html">Read more here.</a></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['webserver']['keepalive_timeout']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default</strong>: <code class="docutils literal"><span class="pre">15</span></code></li>
<li>The number of seconds webserver will wait for a subsequent request
before closing the connection.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['webserver']['ssl_for_legacy_browsers']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Supported values:</strong> <code class="docutils literal"><span class="pre">true</span></code>, <code class="docutils literal"><span class="pre">false</span></code></li>
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">false</span></code></li>
<li>By default webserver is configured to follow strict SSL security standards,
<a class="reference external" href="https://cipherli.st/">covered in this article</a>. However, old browsers (like IE &lt; 9 or
Android &lt; 2.2) wouldn’t work with this configuration very well. If your
application needs a support for those browsers, set this parameter to <code class="docutils literal"><span class="pre">true</span></code>.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['webserver']['port']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default</strong> <code class="docutils literal"><span class="pre">80</span></code></li>
<li>The port on which the webserver should listen for HTTP requests.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['webserver']['ssl_port']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default</strong> <code class="docutils literal"><span class="pre">443</span></code></li>
<li>The port on which the webserver should listen for HTTPs requests, if
SSL requests are enabled. Note that SSL itself is controlled by the
<code class="docutils literal"><span class="pre">app['enable_ssl']</span></code> setting in Opsworks.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['webserver']['site_config_template']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default</strong> <code class="docutils literal"><span class="pre">appserver.apache2.conf.erb</span></code> or <code class="docutils literal"><span class="pre">appserver.nginx.conf.erb</span></code></li>
<li>The name of the cookbook template that should be used to generate per-app
configuration stanzas (known as a “site” in apache and nginx configuration
parlance). Useful in situations where inserting an <code class="docutils literal"><span class="pre">extra_config</span></code> text
section doesn’t provide enough flexibility to customize your per-app
webserver configuration stanza to your liking.</li>
<li>Note that when you use a custom site configuration template, you can
also choose to define <code class="docutils literal"><span class="pre">extra_config</span></code> as any data structure (e.g., Hash
or even nested Hash) to be interpreted by your custom template. This
provides somewhat unlimited flexibility to configure the webserver app
configuration however you see fit.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['webserver']['site_config_template_cookbook']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default</strong> <code class="docutils literal"><span class="pre">opsworks_ruby</span></code></li>
<li>The name of the cookbook in which the site configuration template can be
found. If you override <code class="docutils literal"><span class="pre">app['webserver']['site_config_template']</span></code> to
use a site configuration template from your own cookbook, you’ll need to
override this setting as well to ensure that the opsworks_ruby cookbook
looks for the specified template in your cookbook.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['webserver']['logrotate_name']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Type:</strong> string</li>
<li><strong>Default:</strong> Depends on adapter-specific behaviors</li>
<li>The name of the logrotate_app resource, and generated configuration file,
for the specified app webserver logrotate configuration.</li>
<li>Unlike other logrotate attributes, this attribute can only be set or overridden
at a the app webserver level; there are no app-wide or global settings beyond
those provided by the webserver library</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['webserver']['logrotate_log_paths']</span></code><ul>
<li><strong>Type:</strong> Array</li>
<li><strong>Default:</strong> Depends on adapter-specific behaviors</li>
<li>Which log file(s) should be backed up via logrotate. If this parameter evaluates
to an empty array, no logs will be backed up for the specified app webserver.</li>
<li>Unlike other logrotate attributes, this attribute can only be set or overridden
at a the app webserver level; there are no app-wide or global settings beyond
those provided by the webserver library</li>
</ul>
</li>
</ul>
<div class="section" id="apache">
<h4>apache<a class="headerlink" href="#apache" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['webserver']['extra_config']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Raw Apache2 configuration, which will be inserted into <code class="docutils literal"><span class="pre">&lt;Virtualhost</span> <span class="pre">*:80&gt;</span></code>
(or other port, if specified) section of the application.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['webserver']['extra_config_ssl']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Raw Apache2 configuration, which will be inserted into <code class="docutils literal"><span class="pre">&lt;Virtualhost</span> <span class="pre">*:443&gt;</span></code>
(or other port, if specified for SSL) section of the application. If set to
<code class="docutils literal"><span class="pre">true</span></code>, the <code class="docutils literal"><span class="pre">extra_config</span></code> will be copied.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><a class="reference external" href="https://httpd.apache.org/docs/2.4/mod/core.html#limitrequestbody"><code class="docutils literal"><span class="pre">app['webserver']['limit_request_body']</span></code></a></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default</strong>: <code class="docutils literal"><span class="pre">1048576</span></code></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><a class="reference external" href="https://httpd.apache.org/docs/2.4/mod/core.html#loglevel"><code class="docutils literal"><span class="pre">app['webserver']['log_level']</span></code></a></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default</strong>: <code class="docutils literal"><span class="pre">info</span></code></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['webserver']['log_dir']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default</strong>: <code class="docutils literal"><span class="pre">/var/log/apache2</span></code> (debian) or <code class="docutils literal"><span class="pre">/var/log/httpd</span></code> (rhel)</li>
<li>A place to store application-related Apache2 logs.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><a class="reference external" href="https://httpd.apache.org/docs/current/mod/mod_proxy.html#proxytimeout"><code class="docutils literal"><span class="pre">app['webserver']['proxy_timeout']</span></code></a></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default</strong>: <code class="docutils literal"><span class="pre">60</span></code></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="nginx">
<h4>nginx<a class="headerlink" href="#nginx" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['webserver']['build_type']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Supported values:</strong> <code class="docutils literal"><span class="pre">default</span></code> or <code class="docutils literal"><span class="pre">source</span></code></li>
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">default</span></code></li>
<li>The way the <a class="reference external" href="https://supermarket.chef.io/cookbooks/chef_nginx">chef_nginx</a> cookbook handles <code class="docutils literal"><span class="pre">nginx</span></code> installation.
Check out <a class="reference external" href="https://github.com/miketheman/nginx/tree/2.7.x#recipes">the corresponding docs</a> for more details. Never use
<code class="docutils literal"><span class="pre">node['nginx']['install_method']</span></code>, as it will be always overwritten
by this attribute.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><a class="reference external" href="http://nginx.org/en/docs/http/ngx_http_core_module.html#client_body_timeout"><code class="docutils literal"><span class="pre">app['webserver']['client_body_timeout']</span></code></a></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">12</span></code></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><a class="reference external" href="http://nginx.org/en/docs/http/ngx_http_core_module.html#client_header_timeout"><code class="docutils literal"><span class="pre">app['webserver']['client_header_timeout']</span></code></a></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">12</span></code></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><a class="reference external" href="http://nginx.org/en/docs/http/ngx_http_core_module.html#client_max_body_size"><code class="docutils literal"><span class="pre">app['webserver']['client_max_body_size']</span></code></a></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">10m</span></code></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['webserver']['extra_config']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Raw nginx configuration, which will be inserted into <code class="docutils literal"><span class="pre">server</span></code>
section of the application for HTTP port.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['webserver']['extra_config_ssl']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Raw nginx configuration, which will be inserted into <code class="docutils literal"><span class="pre">server</span></code>
section of the application for HTTPS port. If set to <code class="docutils literal"><span class="pre">true</span></code>,
the <code class="docutils literal"><span class="pre">extra_config</span></code> will be copied.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['webserver']['log_dir']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default</strong>: <code class="docutils literal"><span class="pre">/var/log/nginx</span></code></li>
<li>A place to store application-related nginx logs.</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><a class="reference external" href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_read_timeout"><code class="docutils literal"><span class="pre">app['webserver']['proxy_read_timeout']</span></code></a></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default</strong>: <code class="docutils literal"><span class="pre">60</span></code></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><a class="reference external" href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_send_timeout"><code class="docutils literal"><span class="pre">app['webserver']['proxy_send_timeout']</span></code></a></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default</strong>: <code class="docutils literal"><span class="pre">60</span></code></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><a class="reference external" href="http://nginx.org/en/docs/http/ngx_http_core_module.html#send_timeout"><code class="docutils literal"><span class="pre">app['webserver']['send_timeout']</span></code></a></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default</strong>: <code class="docutils literal"><span class="pre">10</span></code></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['webserver']['enable_upgrade_method']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Supported values:</strong> <code class="docutils literal"><span class="pre">true</span></code>, <code class="docutils literal"><span class="pre">false</span></code></li>
<li><strong>Default</strong>: <code class="docutils literal"><span class="pre">false</span></code></li>
<li>When set to true, enable Websocket’s upgrade method such as Rails actionCable.</li>
</ul>
</div></blockquote>
<div class="line-block">
<div class="line">Since this driver is basically a wrapper for <a class="reference external" href="https://github.com/chef-cookbooks/chef_nginx">chef_nginx cookbook</a>,</div>
<div class="line">you can also configure <a class="reference external" href="https://github.com/miketheman/nginx/tree/2.7.x#attributes">node[‘nginx’] attributes</a></div>
<div class="line">as well (notice that <code class="docutils literal"><span class="pre">node['deploy'][&lt;application_shortname&gt;]</span></code> logic</div>
<div class="line">doesn’t apply here.)</div>
</div>
</div>
</div>
<div class="section" id="worker">
<h3>worker<a class="headerlink" href="#worker" title="Permalink to this headline">¶</a></h3>
<div class="section" id="sidekiq">
<h4>sidekiq<a class="headerlink" href="#sidekiq" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['worker']['config']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Configuration parameters which will be directly passed to the worker.
For example, for <code class="docutils literal"><span class="pre">sidekiq</span></code> they will be serialized to
<a class="reference external" href="https://github.com/mperham/sidekiq/wiki/Advanced-Options#the-sidekiq-configuration-file">sidekiq.yml config file</a>.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="delayed-job">
<h4>delayed_job<a class="headerlink" href="#delayed-job" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['worker']['queues']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li>Array of queues which should be processed by delayed_job</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="resque">
<h4>resque<a class="headerlink" href="#resque" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['worker']['workers']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">2</span></code></li>
<li>Number of resque workers</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app['worker']['queues']</span></code></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><strong>Default:</strong> <code class="docutils literal"><span class="pre">*</span></code></li>
<li>Array of queues which should be processed by resque</li>
</ul>
</div></blockquote>
</div>
</div>
</div>
<div class="section" id="logrotate-attributes">
<h2>Logrotate Attributes<a class="headerlink" href="#logrotate-attributes" title="Permalink to this headline">¶</a></h2>
<p>Logrotate behaviors occur across multiple drivers, for example webserver and
framework. For this reason, the evaluation order for attribute-driven behaviors
is a bit more complex for logrotate than for other options that are either
entirely global (for example, <code class="docutils literal"><span class="pre">global.environment</span></code>) or entirely isolated to a
single type of driver (<code class="docutils literal"><span class="pre">webserver.keepalive_timeout</span></code>).</p>
<p>The evaluation rules for logrotate setting _X_ are as follows, from highest
priority to lowest priority:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app[driver_type]['logrotate_X']</span></code></li>
<li><code class="docutils literal"><span class="pre">app['global']['logrotate_X']</span></code></li>
<li><code class="docutils literal"><span class="pre">node['defaults'][driver_type]['logrotate_X']</span></code></li>
<li><code class="docutils literal"><span class="pre">node['defaults']['global']['logrotate_X']</span></code></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Attributes</a><ul>
<li><a class="reference internal" href="#stack-attributes">Stack attributes</a></li>
<li><a class="reference internal" href="#cross-application-attributes">Cross-application attributes</a><ul>
<li><a class="reference internal" href="#webserver">webserver</a></li>
</ul>
</li>
<li><a class="reference internal" href="#application-attributes">Application attributes</a><ul>
<li><a class="reference internal" href="#global">global</a></li>
<li><a class="reference internal" href="#database">database</a></li>
<li><a class="reference internal" href="#scm">scm</a></li>
<li><a class="reference internal" href="#framework">framework</a><ul>
<li><a class="reference internal" href="#padrino">padrino</a></li>
<li><a class="reference internal" href="#rails">rails</a></li>
</ul>
</li>
<li><a class="reference internal" href="#appserver">appserver</a><ul>
<li><a class="reference internal" href="#unicorn">unicorn</a></li>
<li><a class="reference internal" href="#puma">puma</a></li>
<li><a class="reference internal" href="#thin">thin</a></li>
<li><a class="reference internal" href="#passenger">passenger</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id2">webserver</a><ul>
<li><a class="reference internal" href="#apache">apache</a></li>
<li><a class="reference internal" href="#nginx">nginx</a></li>
</ul>
</li>
<li><a class="reference internal" href="#worker">worker</a><ul>
<li><a class="reference internal" href="#sidekiq">sidekiq</a></li>
<li><a class="reference internal" href="#delayed-job">delayed_job</a></li>
<li><a class="reference internal" href="#resque">resque</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#logrotate-attributes">Logrotate Attributes</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="requirements.html"
                        title="previous chapter">Requirements</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="recipes.html"
                        title="next chapter">Recipes</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/attributes.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="recipes.html" title="Recipes"
             >next</a> |</li>
        <li class="right" >
          <a href="requirements.html" title="Requirements"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">opsworks_ruby 1.8.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Igor Rzegocki &lt;igor@rzegocki.pl&gt;.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
  </body>
</html>